<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VISTAGEOMATICS – HR</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="Vista Geomatics HR forms portal.">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#020509;
  --text:rgba(255,255,255,0.96);
  --muted:rgba(255,255,255,0.70);
  --stroke:rgba(255,255,255,0.12);
  --stroke2:rgba(255,255,255,0.06);
  --vista-blue:#1f9cf0;
  --vista-blue-dark:#005a9c;
  --shadow:0 30px 70px rgba(0,0,0,0.85);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:Inter,system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

/* ================= VIDEO BACKGROUND ================= */
.bg-video{
  position:fixed;
  inset:0;
  z-index:0;
}
.bg-video video{
  width:100%;
  height:100%;
  object-fit:cover;
}
.bg-video::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(900px 520px at 50% 10%, rgba(31,156,240,.10), transparent 62%),
    radial-gradient(900px 520px at 20% 90%, rgba(0,90,156,.12), transparent 62%),
    linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.80));
}

/* ================= LASER CURSOR ================= */
canvas#laser{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:3;
}
@media (pointer: coarse), (max-width: 900px), (prefers-reduced-motion: reduce){
  canvas#laser{display:none}
}

/* ================= INTRO ================= */
.intro{
  position:fixed;
  inset:0;
  z-index:9999;
  background:#000;
  min-height:100svh;
  display:grid;
  place-items:center;
  overflow:hidden;
  transition:opacity .45s ease, visibility .45s ease;
}
.intro.hide{opacity:0;visibility:hidden}

.intro-title{
  font-family:Montserrat,sans-serif;
  text-transform:uppercase;
  letter-spacing:.22em;
  font-size:clamp(1.8rem,7vw,4.5rem);
  text-shadow:0 20px 60px rgba(0,0,0,.9);
  padding:0 16px;
  user-select:none;
}
.intro-title .vista{font-weight:700}
.intro-title .geomatics{font-weight:400}

.bars{
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns:repeat(12,1fr);
}
.bar{
  background:linear-gradient(
    180deg,
    rgba(31,156,240,.30),
    rgba(0,90,156,.18),
    rgba(0,0,0,.95)
  );
  transform:translateY(0);
}
.intro.wipe .bar{
  animation:barOut .9s cubic-bezier(.2,.85,.2,1) forwards;
  animation-delay:calc(var(--i)*.07s);
}
@keyframes barOut{to{transform:translateY(110%)}}

/* ================= CONTENT ================= */
.wrap{
  min-height:100svh;
  display:grid;
  place-items:center;
  padding:24px;
  position:relative;
  z-index:2;
}

.card{
  width:min(920px,100%);
  background:rgba(10,16,26,.65);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  border:1px solid var(--stroke);
  border-radius:28px;
  box-shadow:var(--shadow);
  overflow:hidden;
}

.header{
  padding:22px 26px 16px;
  border-bottom:1px solid var(--stroke2);
  display:flex;
  justify-content:space-between;
  gap:14px;
}

.brand{
  font-family:Montserrat,sans-serif;
  letter-spacing:.2em;
  text-transform:uppercase;
  white-space:nowrap;
}
.brand .vista{font-weight:700}
.brand .geomatics{font-weight:400}
.subtitle{color:var(--muted);margin-top:8px}

.back{
  text-decoration:none;
  color:#fff;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background:rgba(255,255,255,.05);
  letter-spacing:.12em;
  text-transform:uppercase;
  font-size:.78rem;
  align-self:flex-start;
}
.back:hover{background:rgba(255,255,255,.08)}

.body{padding:22px 26px}
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
}
@media(max-width:640px){.grid{grid-template-columns:1fr}}

.btn{
  padding:16px 16px;
  border-radius:18px;
  background:linear-gradient(120deg,#1f9cf0,#005a9c,#1f9cf0);
  background-size:200% 200%;
  color:#fff;
  text-decoration:none;
  font-weight:700;
  letter-spacing:.12em;
  text-transform:uppercase;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:14px;
  transition:background-position .25s ease, box-shadow .2s ease, border-color .2s ease;
  border:1px solid rgba(255,255,255,0.10);
  box-shadow:0 14px 30px rgba(0,0,0,0.70);

  /* Magnetic transforms will override via JS */
  transform: translate3d(0,0,0);
  will-change: transform;
}
.btn:hover{
  background-position:100% 0;
  box-shadow:0 22px 48px rgba(0,0,0,0.88);
  border-color:rgba(255,255,255,0.16);
}
.btn .arrow{
  opacity:.95;
  transform:translateX(0);
  transition:transform .18s ease;
  letter-spacing:0;
}
.btn:hover .arrow{transform:translateX(2px)}
</style>
</head>

<body>

<!-- VIDEO -->
<div class="bg-video" aria-hidden="true">
  <video autoplay muted loop playsinline preload="auto">
    <source src="./hr-bg.mp4" type="video/mp4">
  </video>
</div>

<!-- LASER -->
<canvas id="laser" aria-hidden="true"></canvas>

<!-- INTRO -->
<div class="intro" id="intro" aria-label="Loading">
  <div class="bars" aria-hidden="true">
    <div class="bar" style="--i:0"></div><div class="bar" style="--i:1"></div><div class="bar" style="--i:2"></div><div class="bar" style="--i:3"></div>
    <div class="bar" style="--i:4"></div><div class="bar" style="--i:5"></div><div class="bar" style="--i:6"></div><div class="bar" style="--i:7"></div>
    <div class="bar" style="--i:8"></div><div class="bar" style="--i:9"></div><div class="bar" style="--i:10"></div><div class="bar" style="--i:11"></div>
  </div>
  <div class="intro-title" aria-label="VISTAGEOMATICS">
    <span class="vista">VISTA</span><span class="geomatics">GEOMATICS</span>
  </div>
</div>

<!-- CONTENT -->
<main class="wrap">
  <section class="card" aria-label="HR Links">
    <div class="header">
      <div>
        <div class="brand"><span class="vista">VISTA</span><span class="geomatics">GEOMATICS</span></div>
        <div class="subtitle">HR forms and internal resources</div>
      </div>
      <a class="back" href="./">Back</a>
    </div>

    <div class="body">
      <div class="grid">
        <a class="btn" href="https://efederation.wip.ceridian.com/adfs/ls/?wtrealm=https%3A%2F%2Fiam.dayforce.com%2F&wa=wsignin1.0" target="_blank" rel="noopener">
          <span>Dayforce Login</span><span class="arrow">→</span>
        </a>

        <a class="btn" href="https://clients.powerpay.ca/selfservice/login" target="_blank" rel="noopener">
          <span>PowerPay Employee</span><span class="arrow">→</span>
        </a>

        <a class="btn" href="https://calendar.google.com/calendar/u/0?cid=MHE3YXB1cjBlamczcm9xdDF1amY2ODBsZmtAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ" target="_blank" rel="noopener">
          <span>Time Off Calendar</span><span class="arrow">→</span>
        </a>

        <a class="btn" href="https://vistageomatics.github.io/Mileage-Log/" target="_blank" rel="noopener">
          <span>Mileage Report</span><span class="arrow">→</span>
        </a>

        <a class="btn" href="https://vistageomatics.github.io/Expense-Report/" target="_blank" rel="noopener">
          <span>Expense Report</span><span class="arrow">→</span>
        </a>
      </div>
    </div>
  </section>
</main>

<script>
/* ================= INTRO TIMING ================= */
(function(){
  const intro = document.getElementById("intro");
  if(!intro) return;
  setTimeout(()=>intro.classList.add("wipe"), 450);
  setTimeout(()=>intro.classList.add("hide"), 1150);
  setTimeout(()=>intro.classList.add("hide"), 2200); // safety fallback
})();

/* ================= LASER TRAIL (WITH HOVER BOOST) ================= */
(function(){
  const canvas = document.getElementById("laser");
  if(!canvas) return;

  const prefersReduced = matchMedia("(prefers-reduced-motion: reduce)").matches;
  const isCoarse = matchMedia("(pointer: coarse)").matches;
  const isSmall = matchMedia("(max-width: 900px)").matches;
  if(prefersReduced || isCoarse || isSmall){
    canvas.style.display = "none";
    return;
  }

  const ctx = canvas.getContext("2d");

  // Laser parameters (base + boosted on hover)
  const LASER = {
    max: 20,
    decay: 0.86,
    baseWidth: 1.2,
    baseAlpha: 0.75,
    hoverWidth: 2.2,
    hoverAlpha: 1.05
  };

  let hoverBoost = 0; // 0..1 based on button hover
  const points = [];
  let mx = innerWidth/2, my = innerHeight/2;

  function resize(){
    canvas.width = Math.floor(innerWidth * devicePixelRatio);
    canvas.height = Math.floor(innerHeight * devicePixelRatio);
    canvas.style.width = innerWidth + "px";
    canvas.style.height = innerHeight + "px";
    ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
  }
  addEventListener("resize", resize);
  resize();

  addEventListener("mousemove", (e)=>{
    mx = e.clientX; my = e.clientY;
    points.push({x: mx, y: my, a: 1});
    if(points.length > LASER.max) points.shift();
  }, {passive:true});

  // Button hover -> boost the laser
  const buttons = Array.from(document.querySelectorAll(".btn"));
  buttons.forEach(btn=>{
    btn.addEventListener("mouseenter", ()=>{ hoverBoost = 1; });
    btn.addEventListener("mouseleave", ()=>{ hoverBoost = 0; });
  });

  function draw(){
    ctx.clearRect(0,0,innerWidth,innerHeight);

    // smooth boost easing
    // (micro smoothing so it doesn't snap on/off)
    const target = hoverBoost ? 1 : 0;
    hoverBoost += (target - hoverBoost) * 0.14;

    // decay
    for(const p of points) p.a *= LASER.decay;
    while(points.length && points[0].a < 0.05) points.shift();

    if(points.length >= 2){
      ctx.globalCompositeOperation = "lighter";
      ctx.lineCap = "round";
      ctx.lineJoin = "round";

      const width = LASER.baseWidth + (LASER.hoverWidth - LASER.baseWidth) * hoverBoost;
      const alphaMul = LASER.baseAlpha + (LASER.hoverAlpha - LASER.baseAlpha) * hoverBoost;

      for(let i=1;i<points.length;i++){
        const p0 = points[i-1], p1 = points[i];
        const t = i/(points.length-1);

        const a = Math.min(0.95, p1.a) * (0.14 + t * 0.66) * alphaMul;

        const grad = ctx.createLinearGradient(p0.x,p0.y,p1.x,p1.y);
        // when hovering, add a white-hot core feel
        grad.addColorStop(0, `rgba(31,156,240,${a})`);
        grad.addColorStop(0.55, `rgba(255,255,255,${a * (0.30 + 0.35*hoverBoost)})`);
        grad.addColorStop(1, `rgba(0,90,156,${a})`);

        ctx.strokeStyle = grad;
        ctx.lineWidth = width * (0.9 + t*0.6);
        ctx.beginPath();
        ctx.moveTo(p0.x,p0.y);
        ctx.lineTo(p1.x,p1.y);
        ctx.stroke();
      }

      // head dot
      const head = points[points.length-1];
      ctx.globalCompositeOperation = "source-over";
      ctx.beginPath();
      ctx.arc(head.x, head.y, 1.8 + 0.9*hoverBoost, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255,255,255,${0.70 + 0.20*hoverBoost})`;
      ctx.fill();

      // soft glow
      ctx.beginPath();
      ctx.arc(head.x, head.y, 9 + 6*hoverBoost, 0, Math.PI*2);
      ctx.fillStyle = `rgba(31,156,240,${0.08 + 0.05*hoverBoost})`;
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);
})();

/* ================= MAGNETIC BUTTON PULL ================= */
(function(){
  const prefersReduced = matchMedia("(prefers-reduced-motion: reduce)").matches;
  const isCoarse = matchMedia("(pointer: coarse)").matches;
  if(prefersReduced || isCoarse) return;

  const btns = Array.from(document.querySelectorAll(".btn"));
  if(!btns.length) return;

  // Tunables
  const RADIUS = 110;     // how far away it starts pulling
  const STRENGTH = 0.28;  // 0..1 pull amount
  const MAX_SHIFT = 16;   // px max movement
  const LERP = 0.18;      // easing

  // store per button state
  const state = new WeakMap();
  btns.forEach(b => state.set(b, {x:0,y:0,tx:0,ty:0,hover:false}));

  // single RAF loop for all buttons (smooth + cheap)
  let mx = innerWidth/2, my = innerHeight/2;
  addEventListener("mousemove", (e)=>{ mx = e.clientX; my = e.clientY; }, {passive:true});

  btns.forEach(btn=>{
    btn.addEventListener("mouseenter", ()=> state.get(btn).hover = true);
    btn.addEventListener("mouseleave", ()=>{
      const s = state.get(btn);
      s.hover = false;
      s.tx = 0; s.ty = 0;
    });
  });

  function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

  function tick(){
    for(const btn of btns){
      const r = btn.getBoundingClientRect();
      const cx = r.left + r.width/2;
      const cy = r.top + r.height/2;
      const dx = mx - cx;
      const dy = my - cy;
      const dist = Math.hypot(dx, dy);

      const s = state.get(btn);

      // only pull when close (or hovered)
      const inRange = dist < RADIUS || s.hover;
      if(inRange){
        const falloff = 1 - clamp(dist / RADIUS, 0, 1);
        const pull = falloff * STRENGTH;

        s.tx = clamp(dx * pull, -MAX_SHIFT, MAX_SHIFT);
        s.ty = clamp(dy * pull, -MAX_SHIFT, MAX_SHIFT);
      }else{
        s.tx = 0; s.ty = 0;
      }

      // ease toward target
      s.x += (s.tx - s.x) * LERP;
      s.y += (s.ty - s.y) * LERP;

      btn.style.transform = `translate3d(${s.x.toFixed(2)}px, ${s.y.toFixed(2)}px, 0)`;
    }

    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
})();
</script>

</body>
</html>
